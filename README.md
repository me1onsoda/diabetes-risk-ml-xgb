# SaveUs — 식단 영양 위험도 분석 AI 모델

> 국민건강영양조사 데이터를 기반으로, 식습관 기반 당뇨 위험도를 예측하고 ‘건강 점수(0~100점)’를 산출하는 머신러닝 프로젝트입니다.

<br>

## 1. 프로젝트 개요

이 프로젝트는 단순 혈당 예측을 넘어 **“식단이 혈당 건강에 미치는 위험도”** 자체를 분석하는 AI 모델을 개발하는 것을 목표로 합니다.

- **핵심 목표**: 식단만으로 즉시 위험도 평가 → 직관적인 피드백 제공 (0~100점)
- **데이터셋**: 국민건강영양조사(KNHANES) 2020–2023  
- **모델 특징**: **XGBoost Monotonic Constraints(단조 제약)** 적용  
  → 영양 성분이 증가하면 위험도가 논리적으로 증가/감소하도록 강제

<br>

## 2. 핵심 기능 및 로직

### (1) 데이터 전처리 — Data Preprocessing
- **대상 필터링**
  - 만 19세 이상 성인
  - **당뇨 기진단자 제외** → “식단 변화에 따라 위험이 달라지는 사람들”만 선택
- **파생 변수 생성**
  - 칼로리·나트륨·단백질 권장량 대비 충족률
  - 탄수화물 대비 당류 비율
  - 총 칼로리 대비 지방 비율 등 영양 균형 지표 다수 생성

### (2) AI 모델링 — XGBoost with Constraints
영양학적 상식을 모델이 따르도록 규칙을 강제했습니다.

- **Target**: 공복혈당 100mg/dL 이상 여부 (전당뇨/위험군)
- **Risk Factors (↑ 위험 증가)**  
  나이, BMI, 칼로리, 나트륨, 당류, 지방, 탄수화물
- **Protective Factor (↓ 보호 효과)**  
  단백질

### (3) 페어 스코어링 — Fair Diet Score
단순 확률값이 아닌 **일반인 기준 상대평가 점수(0~100점)** 제공

1. **Avatar Comparison**  
   52세 남성 · BMI 26 가상 아바타에게 사용자의 식단을 적용해 위험도 계산
2. **Score Scaling**  
   전체 분포 기반 Min–Max Scaling → 0~100점 환산

| 점수 | 의미 |
| --- | --- |
| **80~100점 🟢** | 매우 좋음 — 혈당 부담 적음 |
| **50~79점 🟡** | 주의 필요 — 일부 개선 권장 |
| **0~49점 🔴** | 위험 — 혈당 위험군 패턴에 가까움 |

<br>

## 🗂 3. 프로젝트 구조

bash
├── hn20_all.sas7bdat        # (학습 데이터) 국민건강영양조사 2020
├── ...                      # (학습 데이터) 2021–2023
├── texct_scoreing.py        # [Main] 전처리 & 모델 학습 & 점수 산출
├── diabetes_risk_model.pkl  # [Output] 학습된 모델
└── README.md

## 🛠 4. 설치 및 실행 방법

### (1) 라이브러리 설치
```bash
pip install pandas numpy xgboost scikit-learn joblib
````

### (2) 데이터 준비

프로젝트 폴더에 `.sas7bdat` 형태의 국민건강영양조사 원본 데이터 파일을 위치시킵니다.

### (3) 스크립트 실행

```bash
python texct_scoreing.py
```

실행 후 → **데이터 로드 → 전처리 → 모델 학습 → 점수 산출**이 자동으로 진행됩니다.

<br>

## 🧪 5. 시뮬레이션 결과 예시

| 사용자 케이스           | 식단 특징       |    점수   | AI 분석                      |
| :---------------- | :---------- | :-----: | :------------------------- |
| **User A (샐러드)**  | 저염, 고단백, 저당 | **95점** | “완벽합니다! 대사질환 걱정 없는 식단입니다.” |
| **User B (마라탕)**  | 고나트륨, 고당류   | **30점** | “경고! 혈당 위험군 식단과 매우 유사합니다.” |
| **User C (한식백반)** | 고나트륨, 고탄수   | **65점** | “주의 필요합니다. 나트륨을 조금 줄여보세요.” |
| **User F (벌크업)**  | 초고단백 + 과식   | **60점** | “구성은 좋으나 과식은 혈당에 부담을 줍니다.” |

<br>

<div align="center">

**Developed by *Me1onSoda* 🍈🥤**

</div>


